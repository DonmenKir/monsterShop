# 🏰 魔王軍火庫與女兒防衛系統 
#(Monster Shopping & Battle System)

> **「為了守護女兒的笑容，魔王爸爸 (Maopapa) 建立了最強的地下軍火供應鏈！」**

這是一個基於 **Java Swing (WindowBuilder)** 與 **MySQL** 開發的綜合性系統，結合了 **電子商務 (E-Commerce)**、**後台管理 (Admin Dashboard)** 與 **多模式戰略遊戲 (Strategy Game)** 的元素。

本系統採用標準 **MVC 架構 (Model-View-Controller)** 與 **DAO 設計模式**，確保程式碼結構清晰、易於維護。

---

## 📖 專案背景與世界觀

魔王爸爸 (Maopapa) 為了保護年幼可愛的女兒，建立了一個名為「魔王家族入口網」的系統。
* **魔王爸爸 (Admin/Maopapa)**：系統管理者，負責製造魔物、設定數值、監控訂單與營收。
* **各地魔王 (Customer/Mao)**：系統使用者，負責購買魔物，並將兵力投入前線戰場抵禦勇者。

⚠️ **硬派設定 (Hardcore Mode)**：本系統實裝了**「真實戰損」**機制。在第一與第二戰場中，若魔物陣亡，將會直接從資料庫中扣除庫存（永久消失），考驗魔王的調度與財力。

---

## 🛠️ 技術架構 (Tech Stack)

* **程式語言**：Java (JDK 11)
* **GUI 框架**：Java Swing (使用 Absolute Layout 與 WindowBuilder 開發)
* **資料庫**：MySQL 8.0.33
* **資料存取**：JDBC, DAO Pattern
* **架構模式**：MVC
* **專案管理**：Maven

---

## ✨ 核心功能介紹 (Core Features)

### 1. 入口與身分驗證 (LoginUI)
* **雙重身分登入**：支援「魔王 (Mao)」與「魔王爸爸 (Maopapa)」兩種權限驗證。
* **視覺設計**：採用 1000x600 舒適版面，左側展示 16:9 魔王女兒圖片，右側為操作區。
* **圖片雙重載入**：優先讀取本地資源，若失敗則自動切換至網路圖床，確保介面美觀。
* **戰場入口**：登入後可選擇直接進入戰場或進入商店/後台。

### 2. 魔王購物系統 (MaoShoppingUI) - 前台
* **商品瀏覽**：支援依照「種族分類 (Category)」篩選魔物。
* **購物車機制**：
    * 支援複數數量選擇 (`JSpinner`)。
    * 即時計算購物車總金額。
    * 支援移除單一項目或清空購物車。
* **結帳與錢包**：
    * 魔王擁有虛擬錢包 (`Wallet`)。
    * **交易檢查**：結帳時自動檢查餘額，餘額不足無法購買。
    * **Excel 風格確認**：結帳前彈出詳細的表格化收據 (`JTable` in Dialog) 供確認。
* **UI 優化**：統一採用白底粉紅字的按鈕風格，版面寬敞 (1000x760)。

### 3. 魔王爸爸控制中心 (MaopapaUI) - 後台
* **魔物軍火庫管理 (CRUD)**：
    * 新增/刪除魔物。
    * **數值設定**：可詳細設定魔物的 **價格、生命值 (HP)、攻擊力 (ATK)、射程 (Range)、速度 (SPD)**。
* **訂單管理**：
    * **Master-Detail 視圖**：上方為訂單列表，點選後下方即時顯示該筆訂單的詳細內容。
    * **資料視覺化**：清楚顯示下單的魔王 ID 與名稱。
    * **報表列印**：支援將訂單收據列印或匯出為 PDF (`PrinterJob`)，自動縮放以適應紙張。
    * **訂單刪除**：可刪除錯誤的訂單紀錄。

---

## ⚔️ 三大戰場系統 (Battle Systems)

本專案包含三種不同玩法的遊戲模式，所有模式皆與資料庫 (`Inventory`) 連動。

### 🔥 第一戰場：橫向防禦 (BattleUI1)
* **類型**：塔防 (Tower Defense)
* **玩法**：
    * 左側選單顯示玩家擁有的兵力庫存。
    * 將魔物部署在 `5x9` 的網格上阻擋右側來襲的勇者。
    * 魔物具備 **HP** 與 **射程** 屬性。
* **真實戰損**：魔物若被勇者擊殺，將即時呼叫 Service 從資料庫中扣除數量。

### ⚡ 第二戰場：自動對戰 (BattleUI2)
* **類型**：回合制 RPG (Turn-Based Auto Battler)
* **玩法**：
    * 玩家選擇 5 隻魔物組成小隊。
    * 系統隨機生成 5 位勇者。
    * **速度系統**：依照魔物的 **速度 (SPD)** 屬性決定攻擊順序。
    * 雙方輪流自動攻擊，直到一方全滅。
* **真實戰損**：戰鬥中死亡的魔物將永久消失。

### 💰 第三戰場：點擊放置 (BattleUI3)
* **類型**：放置型 (Clicker / Idle)
* **玩法**：
    * 計算玩家所有庫存魔物的 **總 DPS (每秒傷害)**。
    * 自動對中央的 BOSS (勇者) 造成傷害。
    * 玩家可透過滑鼠點擊 BOSS 造成額外傷害。
* **經濟循環**：擊敗勇者後，魔王錢包將獲得金幣獎勵，可用於回到商店購買更多魔物，提升 DPS。

---

## 📂 專案結構 (Project Structure)

```
src/main/java
└── com.monster.shop
    ├── controller  // UI 介面 (LoginUI, BattleUI 1-3, MaopapaUI, MaoShoppingUI)
    ├── dao         // 資料存取層 (JDBC 實作, SQL 操作)
    │   └── impl    // DAO 實作檔
    ├── model       // 資料物件 (Mao, Maopapa, Monster, Order, ArmyUnit...)
    ├── service     // 商業邏輯層 (交易計算, 戰鬥邏輯, 庫存扣除)
    │   └── impl    // Service 實作檔
    └── util        // 工具類 (DB 連線 Tool.java)
```

---

## 📝 開發者筆記 (Dev Notes)

1.  **資料庫一致性**：所有訂單成立與戰損扣除皆使用 `Transaction` (交易控制)，確保數據準確。
2.  **UI 相容性**：所有按鈕皆採用 `Inline Style` 設定背景與不透明屬性，完美相容於 Eclipse WindowBuilder 預覽。
3.  **戰損邏輯**：為了不影響歷史訂單紀錄，戰損扣除是透過插入一筆「數量為 -1」的系統訂單來實現。

---
*Powered by Demon Lord Dad & Daughter Inc.*
